<form method="post" action="{{ site.paymentsSiteUrl }}" id="order-form" class="hidden-order">
    <span class="collapse-purchase">&lsaquo;</span>
    <h2>Køb {{page.name}} mærke</h2>
    <input type="hidden" name="return-url" value="http://xn--mrkelex-mxa.dk{{ page.url }}" id="return-url">
    <input type="hidden" name="badge" value="{{ page.id | remove_first: "/m/" }}">
    <div class="order-part">
    <h3>Vælg antal</h3>
    <label for="count">
        <input class="count-preview" type="number" name="count" value="1" id="count">
        mærke(r) til {{ page.price }} kr stk = <strong class="total-preview"><span class="total-preview-price">{{ page.price }}</span> kr</strong>
    </label>
    <script>
        var countPreview = document.querySelector(".count-preview");
        var totalPreview = document.querySelector(".total-preview-price");
        var badgePrice = {{ page.price }};

        document.querySelector("#count").addEventListener("change", function() {
            var count = this.value;
            countPreview.innerHTML = count;
            totalPreview.innerHTML = count * badgePrice;
        });

        function expandOrderForm() {
            document.querySelector("#order-form").className = "show-order";
            document.querySelector("#order-expand-btn").style.display = "none";
        };

        document.querySelector("#order-expand-btn").addEventListener("click", function() {
            expandOrderForm();
        });

        document.querySelector("[data-action-buy]").addEventListener("click", function() {
            expandOrderForm();
            document.querySelector('#order-form').scrollIntoView({
                behavior: 'smooth',
                block: "start",
                inline: "nearest"
            });
        });

        document.querySelector(".collapse-purchase").addEventListener("click", function() {
            document.querySelector("#order-form").className = "hidden-order";
            setTimeout(function(){document.querySelector("#order-expand-btn").style.display = "block"}, 220);
        });
    </script>
    </div>
    <div class="invoicing-address-part">
    <h3>Faktureringsadresse</h3>
    <label for="invoicing-name">
        Navn:
        <input type="text" name="invoicing-name" id="invoicing-name" autocomplete="name">
    </label>
    <label for="invoicing-address">
        Vej og husnummer:
        <input type="text" name="invoicing-address" id="invoicing-address" autocomplete="shipping street-address">
    </label>
    <div class="city-info-container">
        <label for="invoicing-postal-code" class="postal-code">
            Postnr.:
            <input type="text" name="invoicing-postal-code" id="invoicing-postal-code" autocomplete="shipping postal-code">
        </label>
        <label for="invoicing-city" class="city">
            By:
            <input type="text" name="invoicing-city" id="invoicing-city" autocomplete="shipping locality">
        </label>
    </div>
    <label for="delivery-address-differs" class="checkbox-label">
        <input type="checkbox" name="delivery-address-differs" id="delivery-address-differs">
        Leveringsadressen er forskellig fra faktureringsadressen
    </label>
    </div>
    <div class="delivery-address-part">
    <h3>Leveringsadresse</h3>
    <label for="delivery-name">
        Navn:
        <input type="text" name="delivery-name" id="delivery-name">
    </label>
    <label for="delivery-address">
        Vej og husnummer:
        <input type="text" name="delivery-address" id="delivery-address">
    </label>
    <div class="city-info-container">
        <label for="delivery-postal-code" class="postal-code">
            Postnr.:
            <input type="text" name="delivery-postal-code" id="delivery-postal-code">
        </label>
        <label for="delivery-city" class="city">
            By:
            <input type="text" name="delivery-city" id="delivery-city">
        </label>
    </div>
    </div>
    <script>
        var deliveryPart = document.querySelector(".delivery-address-part");
        document.querySelector("#delivery-address-differs").addEventListener("change", function() {
            if(this.checked) {
                deliveryPart.style = "display: block;";
            }
            else {
                deliveryPart.style = "";
            }
        });
    </script>
    <div class="contact-information-part">
        <h3>Kontaktinformation</h3>
        <label for="email">
            Email:
            <input type="email" name="email" id="email" autocomplete="email">
        </label>
        <label for="phone-number">
            Telefonnummer:
            <input type="tel" name="phone-number" id="phone-number" autocomplete="tel">
        </label>
    </div>
    <p>
        Levering koster {{ page.shippingPrice | default: site.defaultShippingPrice }} kr.
        Vi leverer i hele landet, men desværre ikke internationalt.
        <a href="mailto:kontakt@maerkelex.dk">Kontakt os</a> for en særlig aftale, hvis du ønsker international levering.
    </p>
    <button class="btn buylink">Bestil mærke</button>
</form>
